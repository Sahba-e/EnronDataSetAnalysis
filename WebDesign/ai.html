  <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>I am Amplify</title>
    <style>

      text {
        font-size: 1em;
        stroke: black;
        stroke-width: 2px;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      
      <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="assets/css/bootstrap.min.css">
        <!--        <link rel="stylesheet" href="assets/css/bootstrap-theme.min.css">-->


        <!--For Plugins external css-->
        <link rel="stylesheet" href="assets/css/plugins.css" />
        <link rel="stylesheet" href="assets/css/lato-webfont.css" />
        <link rel="stylesheet" href="assets/css/magnific-popup.css">
              
        
<link rel='stylesheet' id='ls-google-fonts-css'  href='http://fonts.googleapis.com/css?family=Lato:100,300,regular,700,900%7COpen+Sans:300%7CIndie+Flower:regular%7COswald:300,regular,700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
        

        <!--Theme custom css -->
        
    
        <link rel="stylesheet" href="assets/css/style.css">

        <!--Theme Responsive css-->
        <link rel="stylesheet" href="assets/css/responsive.css" />

        <script src="assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      
      
  </head>
  <body>
      
      <div class="temp" style="margin: 0px 40px 40 px 00 px;">
                                            <img src="assets/images/low_res_maybe_faster.gif" alt="" />
                                        </div>
  <input type="file" id="fileInput">
  <input type="button" onclick="showTable" id="showButton">
 <div id="textContainer" style="font-size: 30px;  ">
      
    </div>
    <script>
      function showTable(evt){
        var file = evt.target.files[0];
        var reader = new FileReader();
        var text = reader.readAsText(file);
          reader.onload = doStuffWithFiles;
        }

        function doStuffWithFiles(event){
          var text = event.target.result;
         var allTextLines = text.split(/\r\n|\n/);
        
        var lines = [];

        for (var i=0; i<allTextLines.length; i++) {
            var data = allTextLines[i].split(',');
                var tarr = [];
                for (var j=0; j<data.length; j++) {
                    tarr.push(data[j]);
                }
                lines.push(tarr);
        }

      console.log(lines);
    

       // var data = ["I", " ", "a", "m", " ", "a", "m", "p", "l", "i", "f", "y"];
        lines.shift();
           elements=[];

        for (i =0; i < lines.length;i++ )
        {
           p = document.createElement("span");
           p.innerText= lines[i][0];
           var value = lines[i][1];
           var opacity  = Math.abs(value/1.5);
           var color = Math.floor(Math.abs(value*170));
           //p.style.opacity=opacity;
           if(value < 0)
           {
            p.style.backgroundColor="rgba("+color.toString()+",0,0,"+opacity+")";   
           }
           else{
            p.style.backgroundColor="rgba(0,"+color.toString() +",0,"+opacity+")";   

           }
           elements.push(p)
        }
        setTimeout(function (){ placeElements(elements,elements[0])},40)
    }
    function placeElements(elements,element)
    {
      
        div = $("#textContainer")
        div.append(element);

        if(elements.length > 0)
          setTimeout(function() { placeElements(elements,elements.shift())},40)

    }
  function convertToHex(str){
    var raw = str.match(/(\d+)/g);
    var hexr = parseInt(raw[0]).toString(16);
    var hexg = parseInt(raw[1]).toString(16);
    var hexb = parseInt(raw[2]).toString(16);
        hexr = hexr.length == 1 ? '0' + hexr: hexr;
        hexg = hexg.length == 1 ? '0' + hexg: hexg;
        hexb = hexb.length == 1 ? '0' + hexb: hexb;
    var hex = '#' + hexr + hexg + hexb;
    return hex;
  }
         document.getElementById('fileInput').addEventListener('change', showTable, false);
      // var posScale = d3.scale.ordinal()
      //   .domain(d3.range(data.length))
      //   .rangeRoundPoints([20, 150]);
      // //var colorScale = d3.scale.category20c()
      // //  .domain(d3.range(data.length));


      // var svg = d3.select("body").append("svg");

      // svg.attr("width", 1000)
      //   .attr("height", 200)
      //   .style("opacity", .2)
      //   .style("fill", "red");

      // var texts = svg.selectAll("text").data(data)

      // texts.enter()
      //   .append("text")
      //   .text(function (d) { return d; });

      // texts.attr("text-anchor", "middle")
      //   .attr("y", 100)
      //   .attr("x", function (d, i) { return posScale(i); } )
      //   .attr("fill", function (d, i) { return colorScale(i); });

    </script>
   


  </body>
</html>